{% extends "layout/index.html" %} {% block content %}

<div class="py-5 text-center">
  <h2>Vote Limit Reached</h2>
  <p class="text-muted">
    You can only vote once per hour. Please wait for the countdown to finish before voting again.
  </p>
  <div id="countdown">
    <p>Time remaining: <span id="time-remaining"></span></p>
  </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
  function formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const sec = seconds % 60;
    return `${hours}h ${minutes}m ${sec}s`;
  }

  let remainingTime = {{ remaining_time| default:'0' }};
  const timeRemainingElement = document.getElementById("time-remaining");

  function updateCountdown() {
    if (remainingTime <= 0) {
      clearInterval(interval);
      timeRemainingElement.innerHTML = "You can now vote again!";
    } else {
      timeRemainingElement.innerHTML = formatTime(remainingTime);
      remainingTime--;
    }
  }

  const interval = setInterval(updateCountdown, 1000);
  updateCountdown();
</script>
{% endblock %}
